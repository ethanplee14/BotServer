"use strict";function accountScript(){styleMaterialize(),$(".datepicker").datepicker({container:"body"}),registerAccountContextMenu(),registerAddAcc(),registerDelAcc(),registerEditAcc()}function loginScript(){$("#login-form").submit(function(t){t.preventDefault(),$.post("/verify-login",$(this).serialize(),function(t){alert("Authorized: "+t),document.cookie="token=".concat(t)}).fail(function(){return alert("Unable to authenticate")})})}function ContextMenu(n,e){var o=[];$(document).mousedown(function(t){$.contains(n[0],$(t.target)[0])||$(".context-menu").hide()}),n.children("li").click(function(){var t=$(this).attr("data-action");e[t].call(this),n.hide()}),this.addHook=function(t){o.push(t)},this.handler=function(t){t.preventDefault();for(var e=0;e<o.length;e++){o[e].bind(this)()}n.toggle().css({top:t.pageY-15+"px",left:t.pageX+"px"})}}$(function(){M.AutoInit();var t={accountScript:accountScript,loginScript:loginScript},e=$("body").attr("id");e in t&&t[e]()});var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function formatDate(t){return t=_normalize(t),"".concat(months[t.getMonth()]," ").concat(t.getDate(),", ").concat(t.getFullYear())}function formatTime(t){var e="";return e+=doubleDigit((t=_normalize(t)).getHours())+":",e+=doubleDigit(t.getMinutes())+":",e+=doubleDigit(t.getSeconds())}function formatDateTime(t){return formatTime(t=_normalize(t))+" "+formatDate(t)}function _normalize(t){return t instanceof Date?t:new Date(t)}function doubleDigit(t){return t<10?"0"+t.toString():t.toString()}function styleMaterialize(){$(".select-dropdown").css("font-size","13px"),$(".display-field").css("color","black")}function registerAccountContextMenu(){var t=new ContextMenu($(".context-menu"),{add:function(){return $("#add-modal").modal("open")},del:function(){return $("#del-modal").modal("open")},show:function(){updateShowModal(),$("#show-modal").modal("open")}});t.addHook(addSelName),$("#accounts-table>tbody>tr").contextmenu(t.handler)}function addSelName(t){var e=$(this).find("td").first().html();$(".sel-item").html(e)}function registerAddAcc(){$("#add-form").submit(function(t){t.preventDefault(),$.post("account/create",$(this).serialize(),function(t){"success"==t?location.reload():alert("Error adding account")})})}function registerDelAcc(){$("#del-acc").click(function(){var t=$(".sel-item").html();$.ajax({url:"/account/delete",type:"DELETE",data:{name:t},success:function(){return location.reload()}})})}function registerEditAcc(){$("#edit-btn").click(_editMode)}function _editMode(){_registerSubmit(),$("#edit-btn").addClass("scale-out"),$("#submit-row").addClass("scale-in"),$("#update-form [disabled]:not('#show-id, #show-status-change')").removeAttr("disabled")}function _registerSubmit(){$("#update-form").submit(function(t){t.preventDefault(),$.post("account/update",$(this).serialize(),function(t){"success"==t?location.reload():alert("Error adding account")})})}function _registerCancel(){$()}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){var n=[],o=!0,a=!1,r=void 0;try{for(var i,c=t[Symbol.iterator]();!(o=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);o=!0);}catch(t){a=!0,r=t}finally{try{o||null==c.return||c.return()}finally{if(a)throw r}}return n}function _arrayWithHoles(t){if(Array.isArray(t))return t}var fieldsMapping={"show-id":"_id","show-name":"name","show-email":"email","show-password":"password","show-status":"status","show-pin":"pin","show-created":{prop:"created",parse:formatDate},"show-memb":{prop:"memb",parse:formatDate},"show-status-change":{prop:"lastStatusChange",parse:formatDateTime},"show-break":{prop:"breakUntil",parse:formatDateTime}};function updateShowModal(){var t=$(".sel-item").html();$.get("/account/read",{name:t},populateShowModal)}function populateShowModal(t){for(var e=Object.entries(fieldsMapping),n=0;n<e.length;n++){var o=_slicedToArray(e[n],2),a=o[0],r=o[1],i=void 0;r instanceof Object&&t[r.prop]&&void 0!==r.parse&&(i=r.parse(t[r.prop])),$("#".concat(a)).val(i||t[r]||t[r.prop]||"")}M.updateTextFields(),$("#show-stocked").attr("checked",t.stocked)}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjY291bnQtc2NyaXB0LmpzIiwibG9naW4tc2NyaXB0LmpzIiwiY29udGV4dG1lbnVzL2NvbnRleHRtZW51LmpzIiwibWFpbi5qcyIsInBhcnNlcnMvZGF0ZS5qcyIsInN0eWxlcnMvbWF0ZXJpYWxpemUuanMiLCJyZWdpc3RlcnMvYWNjb3VudC9hY2MtY29udGV4dG1lbnUuanMiLCJyZWdpc3RlcnMvYWNjb3VudC9hZGQtYWNjLmpzIiwicmVnaXN0ZXJzL2FjY291bnQvZGVsLWFjYy5qcyIsInJlZ2lzdGVycy9hY2NvdW50L2VkaXQtYWNjLmpzIiwicmVnaXN0ZXJzL2FjY291bnQvc2hvdy1hY2MuanMiXSwibmFtZXMiOlsiYWNjb3VudFNjcmlwdCIsInN0eWxlTWF0ZXJpYWxpemUiLCIkIiwiZGF0ZXBpY2tlciIsImNvbnRhaW5lciIsInJlZ2lzdGVyQWNjb3VudENvbnRleHRNZW51IiwicmVnaXN0ZXJBZGRBY2MiLCJyZWdpc3RlckRlbEFjYyIsInJlZ2lzdGVyRWRpdEFjYyIsImxvZ2luU2NyaXB0Iiwic3VibWl0IiwiZSIsInByZXZlbnREZWZhdWx0IiwicG9zdCIsInRoaXMiLCJzZXJpYWxpemUiLCJyZXMiLCJhbGVydCIsImRvY3VtZW50IiwiY29va2llIiwiY29uY2F0IiwiZmFpbCIsIkNvbnRleHRNZW51IiwiY29udGV4dE1lbnUiLCJvcHRpb25zIiwibWVudU9wZW5Ib29rcyIsIm1vdXNlZG93biIsImNvbnRhaW5zIiwidGFyZ2V0IiwiaGlkZSIsImNoaWxkcmVuIiwiY2xpY2siLCJhY3Rpb24iLCJhdHRyIiwiY2FsbCIsImFkZEhvb2siLCJob29rIiwicHVzaCIsImhhbmRsZXIiLCJfaSIsImxlbmd0aCIsImJpbmQiLCJ0b2dnbGUiLCJjc3MiLCJ0b3AiLCJwYWdlWSIsImxlZnQiLCJwYWdlWCIsIk0iLCJBdXRvSW5pdCIsInJvdXRlcyIsInJvdXRlIiwibW9udGhzIiwiZm9ybWF0RGF0ZSIsImRhdGUiLCJfbm9ybWFsaXplIiwiZ2V0TW9udGgiLCJnZXREYXRlIiwiZ2V0RnVsbFllYXIiLCJmb3JtYXRUaW1lIiwiZm9ybWF0dGVkVGltZSIsImRvdWJsZURpZ2l0IiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwiZ2V0U2Vjb25kcyIsImZvcm1hdERhdGVUaW1lIiwiRGF0ZSIsIm51bWIiLCJ0b1N0cmluZyIsIm1lbnUiLCJhZGQiLCJtb2RhbCIsImRlbCIsInNob3ciLCJ1cGRhdGVTaG93TW9kYWwiLCJhZGRTZWxOYW1lIiwiY29udGV4dG1lbnUiLCJyb3dOYW1lIiwiZmluZCIsImZpcnN0IiwiaHRtbCIsImRhdGEiLCJsb2NhdGlvbiIsInJlbG9hZCIsImFjY291bnROYW1lIiwiYWpheCIsInVybCIsInR5cGUiLCJuYW1lIiwic3VjY2VzcyIsIl9lZGl0TW9kZSIsIl9yZWdpc3RlclN1Ym1pdCIsImFkZENsYXNzIiwicmVtb3ZlQXR0ciIsIl9yZWdpc3RlckNhbmNlbCIsImZpZWxkc01hcHBpbmciLCJzaG93LWlkIiwic2hvdy1uYW1lIiwic2hvdy1lbWFpbCIsInNob3ctcGFzc3dvcmQiLCJzaG93LXN0YXR1cyIsInNob3ctcGluIiwic2hvdy1jcmVhdGVkIiwicHJvcCIsInBhcnNlIiwic2hvdy1tZW1iIiwic2hvdy1zdGF0dXMtY2hhbmdlIiwic2hvdy1icmVhayIsImFjY05hbWUiLCJnZXQiLCJwb3B1bGF0ZVNob3dNb2RhbCIsImFjYyIsIl9hcnIiLCJPYmplY3QiLCJlbnRyaWVzIiwiX2FyciRfaSIsIl9zbGljZWRUb0FycmF5Iiwia2V5IiwidmFsIiwibmV3VmFsIiwidW5kZWZpbmVkIiwidXBkYXRlVGV4dEZpZWxkcyJdLCJtYXBwaW5ncyI6ImFBQ0EsU0FBU0EsZ0JBQ0xDLG1CQUNBQyxFQUFFLGVBQWVDLFdBQVcsQ0FDeEJDLFVBQVcsU0FFZkMsNkJBQ0FDLGlCQUNBQyxpQkFDQUMsa0JDUkosU0FBU0MsY0FDTFAsRUFBRSxlQUFlUSxPQUFPLFNBQVNDLEdBQzdCQSxFQUFFQyxpQkFDRlYsRUFBRVcsS0FBSyxnQkFBaUJYLEVB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QUF4RSxPQUFBRCxJQUF3RCxDQUFBLElBQUE0RSxFQUFBQyxlQUFBSixFQUFBekUsR0FBQSxHQUE3QzhFLEVBQTZDRixFQUFBLEdBQXZDRyxFQUF1Q0gsRUFBQSxHQUNoREksT0FBTSxFQUNORCxhQUFlTCxRQUFVRixFQUFJTyxFQUFHLFlBQTJCRSxJQUFkRixFQUFJZCxRQUNqRGUsRUFBU0QsRUFBSWQsTUFBTU8sRUFBSU8sRUFBRyxRQUM5QnBILEVBQUMsSUFBQWtCLE9BQUtpRyxJQUFPQyxJQUFJQyxHQUFVUixFQUFJTyxJQUFRUCxFQUFJTyxFQUFHLE9BQWEsSUFFL0R0RSxFQUFFeUUsbUJBQ0Z2SCxFQUFFLGlCQUFpQitCLEtBQUssVUFBVzhFLEVBQUciLCJmaWxlIjoiZGlzdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5mdW5jdGlvbiBhY2NvdW50U2NyaXB0KCkge1xyXG4gICAgc3R5bGVNYXRlcmlhbGl6ZSgpO1xyXG4gICAgJCgnLmRhdGVwaWNrZXInKS5kYXRlcGlja2VyKHtcclxuICAgICAgICBjb250YWluZXI6ICdib2R5J1xyXG4gICAgfSk7XHJcbiAgICByZWdpc3RlckFjY291bnRDb250ZXh0TWVudSgpO1xyXG4gICAgcmVnaXN0ZXJBZGRBY2MoKTtcclxuICAgIHJlZ2lzdGVyRGVsQWNjKCk7XHJcbiAgICByZWdpc3RlckVkaXRBY2MoKTtcclxufVxyXG4iLCJcclxuZnVuY3Rpb24gbG9naW5TY3JpcHQoKSB7XHJcbiAgICAkKCcjbG9naW4tZm9ybScpLnN1Ym1pdChmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQucG9zdCgnL3ZlcmlmeS1sb2dpbicsICQodGhpcykuc2VyaWFsaXplKCksIGZ1bmN0aW9uKHJlcykge1xyXG4gICAgICAgICAgICBhbGVydChcIkF1dGhvcml6ZWQ6IFwiICsgcmVzKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gYHRva2VuPSR7cmVzfWBcclxuICAgICAgICB9KS5mYWlsKCgpID0+IGFsZXJ0KFwiVW5hYmxlIHRvIGF1dGhlbnRpY2F0ZVwiKSk7XHJcbiAgICB9KVxyXG59XHJcblxyXG4iLCJcclxuZnVuY3Rpb24gQ29udGV4dE1lbnUoY29udGV4dE1lbnUsIG9wdGlvbnMpIHtcclxuICAgIGxldCBtZW51T3Blbkhvb2tzID0gW107XHJcbiAgICByZWdpc3RlckNsb3NlSGFuZGxlcigpO1xyXG4gICAgcmVnaXN0ZXJPcHRpb25zKCk7XHJcblxyXG4gICAgdGhpcy5hZGRIb29rID0gZnVuY3Rpb24oaG9vaykge1xyXG4gICAgICAgIG1lbnVPcGVuSG9va3MucHVzaChob29rKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5oYW5kbGVyID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBmb3IgKGxldCBob29rIG9mIG1lbnVPcGVuSG9va3MpIGhvb2suYmluZCh0aGlzKSgpO1xyXG5cclxuICAgICAgICBjb250ZXh0TWVudS50b2dnbGUoKS5jc3Moe1xyXG4gICAgICAgICAgICB0b3A6IGUucGFnZVktMTUgKyAncHgnLFxyXG4gICAgICAgICAgICBsZWZ0OiBlLnBhZ2VYICsgJ3B4J1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiByZWdpc3RlckNsb3NlSGFuZGxlcigpIHtcclxuICAgICAgICAkKGRvY3VtZW50KS5tb3VzZWRvd24oZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaWYgKCEkLmNvbnRhaW5zKGNvbnRleHRNZW51WzBdLCAkKGUudGFyZ2V0KVswXSkpXHJcbiAgICAgICAgICAgICAgICAkKFwiLmNvbnRleHQtbWVudVwiKS5oaWRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVnaXN0ZXJPcHRpb25zKCkge1xyXG4gICAgICAgIGNvbnRleHRNZW51LmNoaWxkcmVuKCdsaScpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBsZXQgYWN0aW9uID0gJCh0aGlzKS5hdHRyKCdkYXRhLWFjdGlvbicpO1xyXG4gICAgICAgICAgICBvcHRpb25zW2FjdGlvbl0uY2FsbCh0aGlzKTtcclxuICAgICAgICAgICAgY29udGV4dE1lbnUuaGlkZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbiIsIlxyXG4kKGZ1bmN0aW9uKCkge1xyXG4gICAgTS5BdXRvSW5pdCgpO1xyXG4gICAgbGV0IHJvdXRlcyA9IHtcclxuICAgICAgICAnYWNjb3VudFNjcmlwdCc6IGFjY291bnRTY3JpcHQsXHJcbiAgICAgICAgJ2xvZ2luU2NyaXB0JzogbG9naW5TY3JpcHRcclxuICAgIH07XHJcbiAgICBsZXQgcm91dGUgPSAkKCdib2R5JykuYXR0cignaWQnKTtcclxuXHJcbiAgICBpZihyb3V0ZSBpbiByb3V0ZXMpXHJcbiAgICAgICAgcm91dGVzW3JvdXRlXSgpO1xyXG59KTsiLCJcclxuY29uc3QgbW9udGhzID0gWydKYW4nLCdGZWInLCdNYXInLCdBcHInLCdNYXknLCdKdW4nLCdKdWwnLCdBdWcnLCdTZXAnLCdPY3QnLCdOb3YnLCdEZWMnXTtcclxuXHJcbmZ1bmN0aW9uIGZvcm1hdERhdGUoZGF0ZSkge1xyXG4gICAgZGF0ZSA9IF9ub3JtYWxpemUoZGF0ZSk7XHJcbiAgICByZXR1cm4gYCR7bW9udGhzW2RhdGUuZ2V0TW9udGgoKV19ICR7ZGF0ZS5nZXREYXRlKCl9LCAke2RhdGUuZ2V0RnVsbFllYXIoKX1gO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmb3JtYXRUaW1lKGRhdGUpIHtcclxuICAgIGRhdGUgPSBfbm9ybWFsaXplKGRhdGUpO1xyXG4gICAgbGV0IGZvcm1hdHRlZFRpbWUgPSAnJztcclxuICAgIGZvcm1hdHRlZFRpbWUgKz0gZG91YmxlRGlnaXQoZGF0ZS5nZXRIb3VycygpKSArICc6JztcclxuICAgIGZvcm1hdHRlZFRpbWUgKz0gZG91YmxlRGlnaXQoZGF0ZS5nZXRNaW51dGVzKCkpICsgJzonO1xyXG4gICAgZm9ybWF0dGVkVGltZSArPSBkb3VibGVEaWdpdChkYXRlLmdldFNlY29uZHMoKSk7XHJcbiAgICByZXR1cm4gZm9ybWF0dGVkVGltZTtcclxufVxyXG5cclxuZnVuY3Rpb24gZm9ybWF0RGF0ZVRpbWUoZGF0ZSkge1xyXG4gICAgZGF0ZSA9IF9ub3JtYWxpemUoZGF0ZSk7XHJcbiAgICByZXR1cm4gZm9ybWF0VGltZShkYXRlKSArICcgJyArIGZvcm1hdERhdGUoZGF0ZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIF9ub3JtYWxpemUoZGF0ZSkge1xyXG4gICAgcmV0dXJuIChkYXRlIGluc3RhbmNlb2YgRGF0ZSkgPyBkYXRlIDogbmV3IERhdGUoZGF0ZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRvdWJsZURpZ2l0KG51bWIpIHtcclxuICAgIGlmKG51bWIgPCAxMClcclxuICAgICAgICByZXR1cm4gJzAnICsgbnVtYi50b1N0cmluZygpO1xyXG4gICAgcmV0dXJuIG51bWIudG9TdHJpbmcoKTtcclxufVxyXG4iLCJcclxuZnVuY3Rpb24gc3R5bGVNYXRlcmlhbGl6ZSgpIHtcclxuICAgICQoJy5zZWxlY3QtZHJvcGRvd24nKS5jc3MoJ2ZvbnQtc2l6ZScsIFwiMTNweFwiKTtcclxuICAgICQoJy5kaXNwbGF5LWZpZWxkJykuY3NzKCdjb2xvcicsICdibGFjaycpXHJcbn0iLCJcclxuZnVuY3Rpb24gcmVnaXN0ZXJBY2NvdW50Q29udGV4dE1lbnUoKSB7XHJcbiAgICBsZXQgbWVudSA9IG5ldyBDb250ZXh0TWVudSgkKCcuY29udGV4dC1tZW51JyksIHtcclxuICAgICAgICAnYWRkJzogKCkgPT4gJCgnI2FkZC1tb2RhbCcpLm1vZGFsKCdvcGVuJyksXHJcbiAgICAgICAgJ2RlbCc6ICgpID0+ICQoJyNkZWwtbW9kYWwnKS5tb2RhbCgnb3BlbicpLFxyXG4gICAgICAgICdzaG93JzogKCkgPT4ge1xyXG4gICAgICAgICAgICB1cGRhdGVTaG93TW9kYWwoKTtcclxuICAgICAgICAgICAgJCgnI3Nob3ctbW9kYWwnKS5tb2RhbCgnb3BlbicpXHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBtZW51LmFkZEhvb2soYWRkU2VsTmFtZSk7XHJcbiAgICAkKCcjYWNjb3VudHMtdGFibGU+dGJvZHk+dHInKS5jb250ZXh0bWVudShtZW51LmhhbmRsZXIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRTZWxOYW1lKG1lbnUpIHtcclxuICAgIGxldCByb3dOYW1lID0gJCh0aGlzKS5maW5kKCd0ZCcpLmZpcnN0KCkuaHRtbCgpO1xyXG4gICAgJCgnLnNlbC1pdGVtJykuaHRtbChyb3dOYW1lKTtcclxufSIsImZ1bmN0aW9uIHJlZ2lzdGVyQWRkQWNjKCkge1xyXG4gICAgJCgnI2FkZC1mb3JtJykuc3VibWl0KGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQucG9zdCgnYWNjb3VudC9jcmVhdGUnLCAkKHRoaXMpLnNlcmlhbGl6ZSgpLCBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhID09ICdzdWNjZXNzJylcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBhbGVydChcIkVycm9yIGFkZGluZyBhY2NvdW50XCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSlcclxufVxyXG4iLCJcclxuZnVuY3Rpb24gcmVnaXN0ZXJEZWxBY2MoKSB7XHJcbiAgICAkKCcjZGVsLWFjYycpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGxldCBhY2NvdW50TmFtZSA9ICQoJy5zZWwtaXRlbScpLmh0bWwoKTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9hY2NvdW50L2RlbGV0ZScsXHJcbiAgICAgICAgICAgICd0eXBlJzogJ0RFTEVURScsXHJcbiAgICAgICAgICAgICdkYXRhJzoge25hbWU6IGFjY291bnROYW1lfSxcclxuICAgICAgICAgICAgc3VjY2VzczogKCkgPT4gbG9jYXRpb24ucmVsb2FkKClcclxuICAgICAgICB9KVxyXG4gICAgfSk7XHJcbn0iLCJcclxuZnVuY3Rpb24gcmVnaXN0ZXJFZGl0QWNjKCkge1xyXG4gICAgJCgnI2VkaXQtYnRuJykuY2xpY2soX2VkaXRNb2RlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gX2VkaXRNb2RlKCkge1xyXG4gICAgX3JlZ2lzdGVyU3VibWl0KCk7XHJcbiAgICAkKCcjZWRpdC1idG4nKS5hZGRDbGFzcygnc2NhbGUtb3V0Jyk7XHJcbiAgICAkKCcjc3VibWl0LXJvdycpLmFkZENsYXNzKCdzY2FsZS1pbicpO1xyXG4gICAgJChcIiN1cGRhdGUtZm9ybSBbZGlzYWJsZWRdOm5vdCgnI3Nob3ctaWQsICNzaG93LXN0YXR1cy1jaGFuZ2UnKVwiKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBfcmVnaXN0ZXJTdWJtaXQoKSB7XHJcbiAgICAkKCcjdXBkYXRlLWZvcm0nKS5zdWJtaXQoZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJC5wb3N0KCdhY2NvdW50L3VwZGF0ZScsICQodGhpcykuc2VyaWFsaXplKCksIGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKGRhdGEgPT0gJ3N1Y2Nlc3MnKVxyXG4gICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIGFsZXJ0KFwiRXJyb3IgYWRkaW5nIGFjY291bnRcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gX3JlZ2lzdGVyQ2FuY2VsKCkge1xyXG4gICAgJCgpXHJcbn0iLCJcclxuY29uc3QgZmllbGRzTWFwcGluZyA9IHtcclxuICAgICdzaG93LWlkJzogJ19pZCcsXHJcbiAgICAnc2hvdy1uYW1lJzogJ25hbWUnLFxyXG4gICAgJ3Nob3ctZW1haWwnOiAnZW1haWwnLFxyXG4gICAgJ3Nob3ctcGFzc3dvcmQnOiAncGFzc3dvcmQnLFxyXG4gICAgJ3Nob3ctc3RhdHVzJzogJ3N0YXR1cycsXHJcbiAgICAnc2hvdy1waW4nOiAncGluJyxcclxuICAgICdzaG93LWNyZWF0ZWQnOiB7XHJcbiAgICAgICAgcHJvcDogJ2NyZWF0ZWQnLFxyXG4gICAgICAgIHBhcnNlOiBmb3JtYXREYXRlXHJcbiAgICB9LFxyXG4gICAgJ3Nob3ctbWVtYic6IHtcclxuICAgICAgICBwcm9wOiAnbWVtYicsXHJcbiAgICAgICAgcGFyc2U6IGZvcm1hdERhdGVcclxuICAgIH0sXHJcbiAgICAnc2hvdy1zdGF0dXMtY2hhbmdlJzoge1xyXG4gICAgICAgIHByb3A6ICdsYXN0U3RhdHVzQ2hhbmdlJyxcclxuICAgICAgICBwYXJzZTogZm9ybWF0RGF0ZVRpbWVcclxuICAgIH0sXHJcbiAgICAnc2hvdy1icmVhayc6IHtcclxuICAgICAgICBwcm9wOiAnYnJlYWtVbnRpbCcsXHJcbiAgICAgICAgcGFyc2U6IGZvcm1hdERhdGVUaW1lXHJcbiAgICB9XHJcbn07XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVTaG93TW9kYWwoKSB7XHJcbiAgICBsZXQgYWNjTmFtZSA9ICQoJy5zZWwtaXRlbScpLmh0bWwoKTtcclxuICAgICQuZ2V0KCcvYWNjb3VudC9yZWFkJywge25hbWU6IGFjY05hbWV9LCBwb3B1bGF0ZVNob3dNb2RhbCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBvcHVsYXRlU2hvd01vZGFsKGFjYykge1xyXG4gICAgZm9yKGNvbnN0IFtrZXkgLCB2YWxdIG9mIE9iamVjdC5lbnRyaWVzKGZpZWxkc01hcHBpbmcpKSB7XHJcbiAgICAgICAgbGV0IG5ld1ZhbDtcclxuICAgICAgICBpZiAodmFsIGluc3RhbmNlb2YgT2JqZWN0ICYmIGFjY1t2YWxbJ3Byb3AnXV0gJiYgdmFsLnBhcnNlICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIG5ld1ZhbCA9IHZhbC5wYXJzZShhY2NbdmFsWydwcm9wJ11dKTtcclxuICAgICAgICAkKGAjJHtrZXl9YCkudmFsKG5ld1ZhbCB8fCBhY2NbdmFsXSB8fCBhY2NbdmFsWydwcm9wJ11dIHx8ICcnKTtcclxuICAgIH1cclxuICAgIE0udXBkYXRlVGV4dEZpZWxkcygpO1xyXG4gICAgJCgnI3Nob3ctc3RvY2tlZCcpLmF0dHIoJ2NoZWNrZWQnLCBhY2NbJ3N0b2NrZWQnXSk7XHJcbn0iXX0=
