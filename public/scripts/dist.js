"use strict";function accountScript(){styleMaterialize(),$(".datepicker").datepicker({container:"body"}),registerAccountContextMenu(),registerAddAcc(),registerDelAcc(),registerEditAcc()}function loginScript(){$("#login-form").submit(function(t){t.preventDefault(),$.post("/verify-login",$(this).serialize(),function(t){"success"==t&&(window.location.href="../")}).fail(function(){return alert("Unable to authenticate")})})}function statsScript(){$(".datepicker").datepicker({autoClose:!0,defaultDate:new Date(Date.now()),setDefaultDate:!0})}function ContextMenu(o,e){var n=[];$(document).mousedown(function(t){$.contains(o[0],$(t.target)[0])||$(".context-menu").hide()}),o.children("li").click(function(){var t=$(this).attr("data-action");e[t].call(this),o.hide()}),this.addHook=function(t){n.push(t)},this.handler=function(t){t.preventDefault();for(var e=0;e<n.length;e++){n[e].bind(this)()}o.toggle().css({top:t.pageY-15+"px",left:t.pageX+"px"})}}$(function(){M.AutoInit();var t=$("body").attr("id");t in window&&window[t]()});var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function formatDate(t){return t=_normalize(t),"".concat(months[t.getMonth()]," ").concat(t.getDate(),", ").concat(t.getFullYear())}function formatTime(t){var e="";return e+=doubleDigit((t=_normalize(t)).getHours())+":",e+=doubleDigit(t.getMinutes())+":",e+=doubleDigit(t.getSeconds())}function formatDateTime(t){return formatTime(t=_normalize(t))+" "+formatDate(t)}function _normalize(t){return t instanceof Date?t:new Date(t)}function doubleDigit(t){return t<10?"0"+t.toString():t.toString()}function styleMaterialize(){$(".select-dropdown").css("font-size","13px"),$(".display-field").css("color","black")}function registerAccountContextMenu(){var t=new ContextMenu($(".context-menu"),{add:function(){return $("#add-modal").modal("open")},del:function(){return $("#del-modal").modal("open")},show:function(){updateShowModal(),$("#show-modal").modal("open")}});t.addHook(addSelName),$("#accounts-table>tbody>tr").contextmenu(t.handler)}function addSelName(t){var e=$(this).find("td").first().html();$(".sel-item").html(e)}function registerAddAcc(){$("#add-form").submit(function(t){t.preventDefault(),$.post("account/create",$(this).serialize(),function(t){"success"==t?location.reload():alert("Error adding account")})})}function registerDelAcc(){$("#del-acc").click(function(){var t=$(".sel-item").html();$.ajax({url:"/account/delete",type:"DELETE",data:{name:t},success:function(){return location.reload()}})})}function registerEditAcc(){$("#edit-btn").click(_editMode),_registerOnClose()}function _editMode(){_registerSubmit(),$("#edit-btn").addClass("scale-out"),$("#submit-row").addClass("scale-in"),$("#update-form [disabled]:not('#show-id, #show-status-change')").removeAttr("disabled")}function _registerSubmit(){$("#update-form").submit(function(t){t.preventDefault(),$(this).serialize(),$.ajax({type:"PUT",url:"account/update/".concat($("#show-id").val()),data:$(this).serialize(),success:function(t){"success"==t?location.reload():alert("Error updating account")}})})}function _registerOnClose(){$("#show-modal").modal({dismissible:!0,onCloseStart:function(){$("#edit-btn").removeClass("scale-out"),$("#submit-row").removeClass("scale-in"),$("#update-form input").attr("disabled",!0)}})}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){var o=[],n=!0,a=!1,i=void 0;try{for(var r,c=t[Symbol.iterator]();!(n=(r=c.next()).done)&&(o.push(r.value),!e||o.length!==e);n=!0);}catch(t){a=!0,i=t}finally{try{n||null==c.return||c.return()}finally{if(a)throw i}}return o}function _arrayWithHoles(t){if(Array.isArray(t))return t}var fieldsMapping={"show-id":"_id","show-name":"name","show-email":"email","show-password":"password","show-status":"status","show-pin":"pin","show-created":{prop:"created",parse:formatDate},"show-memb":{prop:"memb",parse:formatDate},"show-status-change":{prop:"lastStatusChange",parse:formatDateTime},"show-break":{prop:"breakUntil",parse:formatDateTime}};function updateShowModal(){var t=$(".sel-item").html();$.get("/account/read",{name:t},populateShowModal)}function populateShowModal(t){for(var e=Object.entries(fieldsMapping),o=0;o<e.length;o++){var n=_slicedToArray(e[o],2),a=n[0],i=n[1],r=void 0;i instanceof Object&&t[i.prop]&&void 0!==i.parse&&(r=i.parse(t[i.prop])),$("#".concat(a)).val(r||t[i]||t[i.prop]||"")}M.updateTextFields(),$("#show-stocked").attr("checked",t.stocked)}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjY291bnQtc2NyaXB0LmpzIiwibG9naW4tc2NyaXB0LmpzIiwic3RhdHMtc2NyaXB0LmpzIiwiY29udGV4dG1lbnVzL2NvbnRleHRtZW51LmpzIiwibWFpbi5qcyIsInBhcnNlcnMvZGF0ZS5qcyIsInN0eWxlcnMvbWF0ZXJpYWxpemUuanMiLCJyZWdpc3RlcnMvYWNjb3VudC9hY2MtY29udGV4dG1lbnUuanMiLCJyZWdpc3RlcnMvYWNjb3VudC9hZGQtYWNjLmpzIiwicmVnaXN0ZXJzL2FjY291bnQvZGVsLWFjYy5qcyIsInJlZ2lzdGVycy9hY2NvdW50L2VkaXQtYWNjLmpzIiwicmVnaXN0ZXJzL2FjY291bnQvc2hvdy1hY2MuanMiXSwibmFtZXMiOlsiYWNjb3VudFNjcmlwdCIsInN0eWxlTWF0ZXJpYWxpemUiLCIkIiwiZGF0ZXBpY2tlciIsImNvbnRhaW5lciIsInJlZ2lzdGVyQWNjb3VudENvbnRleHRNZW51IiwicmVnaXN0ZXJBZGRBY2MiLCJyZWdpc3RlckRlbEFjYyIsInJlZ2lzdGVyRWRpdEFjYyIsImxvZ2luU2NyaXB0Iiwic3VibWl0IiwiZSIsInByZXZlbnREZWZhdWx0IiwicG9zdCIsInRoaXMiLCJzZXJpYWxpemUiLCJyZXMiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJmYWlsIiwiYWxlcnQiLCJzdGF0c1NjcmlwdCIsImF1dG9DbG9zZSIsImRlZmF1bHREYXRlIiwiRGF0ZSIsIm5vdyIsInNldERlZmF1bHREYXRlIiwiQ29udGV4dE1lbnUiLCJjb250ZXh0TWVudSIsIm9wdGlvbnMiLCJtZW51T3Blbkhvb2tzIiwiZG9jdW1lbnQiLCJtb3VzZWRvd24iLCJjb250YWlucyIsInRhcmdldCIsImhpZGUiLCJjaGlsZHJlbiIsImNsaWNrIiwiYWN0aW9uIiwiYXR0ciIsImNhbGwiLCJhZGRIb29rIiwiaG9vayIsInB1c2giLCJoYW5kbGVyIiwiX2kiLCJsZW5ndGgiLCJiaW5kIiwidG9nZ2xlIiwiY3NzIiwidG9wIiwicGFnZVkiLCJsZWZ0IiwicGFnZVgiLCJNIiwiQXV0b0luaXQiLCJyb3V0ZSIsIm1vbnRocyIsImZvcm1hdERhdGUiLCJkYXRlIiwiX25vcm1hbGl6ZSIsImNvbmNhdCIsImdldE1vbnRoIiwiZ2V0RGF0ZSIsImdldEZ1bGxZZWFyIiwiZm9ybWF0VGltZSIsImZvcm1hdHRlZFRpbWUiLCJkb3VibGVEaWdpdCIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsImdldFNlY29uZHMiLCJmb3JtYXREYXRlVGltZSIsIm51bWIiLCJ0b1N0cmluZyIsIm1lbnUiLCJhZGQiLCJtb2RhbCIsImRlbCIsInNob3ciLCJ1cGRhdGVTaG93TW9kYWwiLCJhZGRTZWxOYW1lIiwiY29udGV4dG1lbnUiLCJyb3dOYW1lIiwiZmluZCIsImZpcnN0IiwiaHRtbCIsImRhdGEiLCJyZWxvYWQiLCJhY2NvdW50TmFtZSIsImFqYXgiLCJ1cmwiLCJ0eXBlIiwibmFtZSIsInN1Y2Nlc3MiLCJfZWRpdE1vZGUiLCJfcmVnaXN0ZXJPbkNsb3NlIiwiX3JlZ2lzdGVyU3VibWl0IiwiYWRkQ2xhc3MiLCJyZW1vdmVBdHRyIiwidmFsIiwiZGlzbWlzc2libGUiLCJvbkNsb3NlU3RhcnQiLCJyZW1vdmVDbGFzcyIsImZpZWxkc01hcHBpbmciLCJzaG93LWlkIiwic2hvdy1uYW1lIiwic2hvdy1lbWFpbCIsInNob3ctcGFzc3dvcmQiLCJzaG93LXN0YXR1cyIsInNob3ctcGluIiwic2hvdy1jcmVhdGVkIiwicHJvcCIsInBhcnNlIiwic2hvdy1tZW1iIiwic2hvdy1zdGF0dXMtY2hhbmdlIiwic2hvdy1icmVhayIsImFjY05hbWUiLCJnZXQiLCJwb3B1bGF0ZVNob3dNb2RhbCIsImFjYyIsIl9hcnIiLCJPYmplY3QiLCJlbnRyaWVzIiwiX2FyciRfaSIsIl9zbGljZWRUb0FycmF5Iiwia2V5IiwibmV3VmFsIiwidW5kZWZpbmVkIiwidXBkYXRlVGV4dEZpZWxkcyJdLCJtYXBwaW5ncyI6ImFBQ0EsU0FBU0EsZ0JBQ0xDLG1CQUNBQyxFQUFFLGVBQWVDLFdB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LFlBQWEsT0FDYkMsYUFBYyxRQUNkQyxnQkFBaUIsV0FDakJDLGNBQWUsU0FDZkMsV0FBWSxNQUNaQyxlQUFnQixDQUNaQyxLQUFNLFVBQ05DLE1BQU90RCxZQUVYdUQsWUFBYSxDQUNURixLQUFNLE9BQ05DLE1BQU90RCxZQUVYd0QscUJBQXNCLENBQ2xCSCxLQUFNLG1CQUNOQyxNQUFPekMsZ0JBRVg0QyxhQUFjLENBQ1ZKLEtBQU0sYUFDTkMsTUFBT3pDLGlCQUlmLFNBQVNRLGtCQUNMLElBQUlxQyxFQUFVbkgsRUFBRSxhQUFhb0YsT0FDN0JwRixFQUFFb0gsSUFBSSxnQkFBaUIsQ0FBQ3pCLEtBQU13QixHQUFVRSxtQkFHNUMsU0FBU0Esa0JBQWtCQyxHQUN2QixJQUQ0QixJQUFBQyxFQUNIQyxPQUFPQyxRQUFRbkIsZUFBeEMxRCxFQUFBLEVBQUFBLEVBQUEyRSxFQUFBMUUsT0FBQUQsSUFBd0QsQ0FBQSxJQUFBOEUsRUFBQUMsZUFBQUosRUFBQTNFLEdBQUEsR0FBN0NnRixFQUE2Q0YsRUFBQSxHQUF2Q3hCLEVBQXVDd0IsRUFBQSxHQUNoREcsT0FBTSxFQUNOM0IsYUFBZXNCLFFBQVVGLEVBQUlwQixFQUFHLFlBQTJCNEIsSUFBZDVCLEVBQUlhLFFBQ2pEYyxFQUFTM0IsRUFBSWEsTUFBTU8sRUFBSXBCLEVBQUcsUUFDOUJsRyxFQUFDLElBQUE0RCxPQUFLZ0UsSUFBTzFCLElBQUkyQixHQUFVUCxFQUFJcEIsSUFBUW9CLEVBQUlwQixFQUFHLE9BQWEsSUFFL0Q3QyxFQUFFMEUsbUJBQ0YvSCxFQUFFLGlCQUFpQnNDLEtBQUssVUFBV2dGLEVBQUciLCJmaWxlIjoiZGlzdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5mdW5jdGlvbiBhY2NvdW50U2NyaXB0KCkge1xyXG4gICAgc3R5bGVNYXRlcmlhbGl6ZSgpO1xyXG4gICAgJCgnLmRhdGVwaWNrZXInKS5kYXRlcGlja2VyKHtcclxuICAgICAgICBjb250YWluZXI6ICdib2R5J1xyXG4gICAgfSk7XHJcbiAgICByZWdpc3RlckFjY291bnRDb250ZXh0TWVudSgpO1xyXG4gICAgcmVnaXN0ZXJBZGRBY2MoKTtcclxuICAgIHJlZ2lzdGVyRGVsQWNjKCk7XHJcbiAgICByZWdpc3RlckVkaXRBY2MoKTtcclxufVxyXG4iLCJcclxuZnVuY3Rpb24gbG9naW5TY3JpcHQoKSB7XHJcbiAgICAkKCcjbG9naW4tZm9ybScpLnN1Ym1pdChmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQucG9zdCgnL3ZlcmlmeS1sb2dpbicsICQodGhpcykuc2VyaWFsaXplKCksIGZ1bmN0aW9uKHJlcykge1xyXG4gICAgICAgICAgICBpZiAocmVzID09ICdzdWNjZXNzJylcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy4uLyc7XHJcbiAgICAgICAgfSkuZmFpbCgoKSA9PiBhbGVydChcIlVuYWJsZSB0byBhdXRoZW50aWNhdGVcIikpO1xyXG4gICAgfSlcclxufVxyXG5cclxuIiwiXHJcbmZ1bmN0aW9uIHN0YXRzU2NyaXB0KCkge1xyXG4gICAgJCgnLmRhdGVwaWNrZXInKS5kYXRlcGlja2VyKHtcclxuICAgICAgICBhdXRvQ2xvc2U6IHRydWUsXHJcbiAgICAgICAgZGVmYXVsdERhdGU6IG5ldyBEYXRlKERhdGUubm93KCkpLFxyXG4gICAgICAgIHNldERlZmF1bHREYXRlOiB0cnVlXHJcbiAgICB9KTtcclxufSIsIlxyXG5mdW5jdGlvbiBDb250ZXh0TWVudShjb250ZXh0TWVudSwgb3B0aW9ucykge1xyXG4gICAgbGV0IG1lbnVPcGVuSG9va3MgPSBbXTtcclxuICAgIHJlZ2lzdGVyQ2xvc2VIYW5kbGVyKCk7XHJcbiAgICByZWdpc3Rlck9wdGlvbnMoKTtcclxuXHJcbiAgICB0aGlzLmFkZEhvb2sgPSBmdW5jdGlvbihob29rKSB7XHJcbiAgICAgICAgbWVudU9wZW5Ib29rcy5wdXNoKGhvb2spO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmhhbmRsZXIgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGZvciAobGV0IGhvb2sgb2YgbWVudU9wZW5Ib29rcykgaG9vay5iaW5kKHRoaXMpKCk7XHJcblxyXG4gICAgICAgIGNvbnRleHRNZW51LnRvZ2dsZSgpLmNzcyh7XHJcbiAgICAgICAgICAgIHRvcDogZS5wYWdlWS0xNSArICdweCcsXHJcbiAgICAgICAgICAgIGxlZnQ6IGUucGFnZVggKyAncHgnXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIHJlZ2lzdGVyQ2xvc2VIYW5kbGVyKCkge1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm1vdXNlZG93bihmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBpZiAoISQuY29udGFpbnMoY29udGV4dE1lbnVbMF0sICQoZS50YXJnZXQpWzBdKSlcclxuICAgICAgICAgICAgICAgICQoXCIuY29udGV4dC1tZW51XCIpLmhpZGUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiByZWdpc3Rlck9wdGlvbnMoKSB7XHJcbiAgICAgICAgY29udGV4dE1lbnUuY2hpbGRyZW4oJ2xpJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGxldCBhY3Rpb24gPSAkKHRoaXMpLmF0dHIoJ2RhdGEtYWN0aW9uJyk7XHJcbiAgICAgICAgICAgIG9wdGlvbnNbYWN0aW9uXS5jYWxsKHRoaXMpO1xyXG4gICAgICAgICAgICBjb250ZXh0TWVudS5oaWRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIiwiXHJcbiQoZnVuY3Rpb24oKSB7XHJcbiAgICBNLkF1dG9Jbml0KCk7XHJcbiAgICBsZXQgcm91dGUgPSAkKCdib2R5JykuYXR0cignaWQnKTtcclxuXHJcbiAgICBpZihyb3V0ZSBpbiB3aW5kb3cpXHJcbiAgICAgICAgd2luZG93W3JvdXRlXSgpO1xyXG59KTtcclxuXHJcbiIsIlxyXG5jb25zdCBtb250aHMgPSBbJ0phbicsJ0ZlYicsJ01hcicsJ0FwcicsJ01heScsJ0p1bicsJ0p1bCcsJ0F1ZycsJ1NlcCcsJ09jdCcsJ05vdicsJ0RlYyddO1xyXG5cclxuZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlKSB7XHJcbiAgICBkYXRlID0gX25vcm1hbGl6ZShkYXRlKTtcclxuICAgIHJldHVybiBgJHttb250aHNbZGF0ZS5nZXRNb250aCgpXX0gJHtkYXRlLmdldERhdGUoKX0sICR7ZGF0ZS5nZXRGdWxsWWVhcigpfWA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdFRpbWUoZGF0ZSkge1xyXG4gICAgZGF0ZSA9IF9ub3JtYWxpemUoZGF0ZSk7XHJcbiAgICBsZXQgZm9ybWF0dGVkVGltZSA9ICcnO1xyXG4gICAgZm9ybWF0dGVkVGltZSArPSBkb3VibGVEaWdpdChkYXRlLmdldEhvdXJzKCkpICsgJzonO1xyXG4gICAgZm9ybWF0dGVkVGltZSArPSBkb3VibGVEaWdpdChkYXRlLmdldE1pbnV0ZXMoKSkgKyAnOic7XHJcbiAgICBmb3JtYXR0ZWRUaW1lICs9IGRvdWJsZURpZ2l0KGRhdGUuZ2V0U2Vjb25kcygpKTtcclxuICAgIHJldHVybiBmb3JtYXR0ZWRUaW1lO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmb3JtYXREYXRlVGltZShkYXRlKSB7XHJcbiAgICBkYXRlID0gX25vcm1hbGl6ZShkYXRlKTtcclxuICAgIHJldHVybiBmb3JtYXRUaW1lKGRhdGUpICsgJyAnICsgZm9ybWF0RGF0ZShkYXRlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gX25vcm1hbGl6ZShkYXRlKSB7XHJcbiAgICByZXR1cm4gKGRhdGUgaW5zdGFuY2VvZiBEYXRlKSA/IGRhdGUgOiBuZXcgRGF0ZShkYXRlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZG91YmxlRGlnaXQobnVtYikge1xyXG4gICAgaWYobnVtYiA8IDEwKVxyXG4gICAgICAgIHJldHVybiAnMCcgKyBudW1iLnRvU3RyaW5nKCk7XHJcbiAgICByZXR1cm4gbnVtYi50b1N0cmluZygpO1xyXG59XHJcbiIsIlxyXG5mdW5jdGlvbiBzdHlsZU1hdGVyaWFsaXplKCkge1xyXG4gICAgJCgnLnNlbGVjdC1kcm9wZG93bicpLmNzcygnZm9udC1zaXplJywgXCIxM3B4XCIpO1xyXG4gICAgJCgnLmRpc3BsYXktZmllbGQnKS5jc3MoJ2NvbG9yJywgJ2JsYWNrJylcclxufSIsIlxyXG5mdW5jdGlvbiByZWdpc3RlckFjY291bnRDb250ZXh0TWVudSgpIHtcclxuICAgIGxldCBtZW51ID0gbmV3IENvbnRleHRNZW51KCQoJy5jb250ZXh0LW1lbnUnKSwge1xyXG4gICAgICAgICdhZGQnOiAoKSA9PiAkKCcjYWRkLW1vZGFsJykubW9kYWwoJ29wZW4nKSxcclxuICAgICAgICAnZGVsJzogKCkgPT4gJCgnI2RlbC1tb2RhbCcpLm1vZGFsKCdvcGVuJyksXHJcbiAgICAgICAgJ3Nob3cnOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIHVwZGF0ZVNob3dNb2RhbCgpO1xyXG4gICAgICAgICAgICAkKCcjc2hvdy1tb2RhbCcpLm1vZGFsKCdvcGVuJylcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIG1lbnUuYWRkSG9vayhhZGRTZWxOYW1lKTtcclxuICAgICQoJyNhY2NvdW50cy10YWJsZT50Ym9keT50cicpLmNvbnRleHRtZW51KG1lbnUuaGFuZGxlcik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZFNlbE5hbWUobWVudSkge1xyXG4gICAgbGV0IHJvd05hbWUgPSAkKHRoaXMpLmZpbmQoJ3RkJykuZmlyc3QoKS5odG1sKCk7XHJcbiAgICAkKCcuc2VsLWl0ZW0nKS5odG1sKHJvd05hbWUpO1xyXG59IiwiZnVuY3Rpb24gcmVnaXN0ZXJBZGRBY2MoKSB7XHJcbiAgICAkKCcjYWRkLWZvcm0nKS5zdWJtaXQoZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJC5wb3N0KCdhY2NvdW50L2NyZWF0ZScsICQodGhpcykuc2VyaWFsaXplKCksIGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKGRhdGEgPT0gJ3N1Y2Nlc3MnKVxyXG4gICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIGFsZXJ0KFwiRXJyb3IgYWRkaW5nIGFjY291bnRcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KVxyXG59XHJcbiIsIlxyXG5mdW5jdGlvbiByZWdpc3RlckRlbEFjYygpIHtcclxuICAgICQoJyNkZWwtYWNjJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgbGV0IGFjY291bnROYW1lID0gJCgnLnNlbC1pdGVtJykuaHRtbCgpO1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2FjY291bnQvZGVsZXRlJyxcclxuICAgICAgICAgICAgJ3R5cGUnOiAnREVMRVRFJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7bmFtZTogYWNjb3VudE5hbWV9LFxyXG4gICAgICAgICAgICBzdWNjZXNzOiAoKSA9PiBsb2NhdGlvbi5yZWxvYWQoKVxyXG4gICAgICAgIH0pXHJcbiAgICB9KTtcclxufSIsIlxyXG5mdW5jdGlvbiByZWdpc3RlckVkaXRBY2MoKSB7XHJcbiAgICAkKCcjZWRpdC1idG4nKS5jbGljayhfZWRpdE1vZGUpO1xyXG4gICAgX3JlZ2lzdGVyT25DbG9zZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBfZWRpdE1vZGUoKSB7XHJcbiAgICBfcmVnaXN0ZXJTdWJtaXQoKTtcclxuXHJcbiAgICAkKCcjZWRpdC1idG4nKS5hZGRDbGFzcygnc2NhbGUtb3V0Jyk7XHJcbiAgICAkKCcjc3VibWl0LXJvdycpLmFkZENsYXNzKCdzY2FsZS1pbicpO1xyXG4gICAgJChcIiN1cGRhdGUtZm9ybSBbZGlzYWJsZWRdOm5vdCgnI3Nob3ctaWQsICNzaG93LXN0YXR1cy1jaGFuZ2UnKVwiKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBfcmVnaXN0ZXJTdWJtaXQoKSB7XHJcbiAgICAkKCcjdXBkYXRlLWZvcm0nKS5zdWJtaXQoZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCh0aGlzKS5zZXJpYWxpemUoKTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB0eXBlOiAnUFVUJyxcclxuICAgICAgICAgICAgdXJsOiBgYWNjb3VudC91cGRhdGUvJHskKCcjc2hvdy1pZCcpLnZhbCgpfWAsXHJcbiAgICAgICAgICAgIGRhdGE6ICQodGhpcykuc2VyaWFsaXplKCksXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhID09ICdzdWNjZXNzJylcclxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBhbGVydChcIkVycm9yIHVwZGF0aW5nIGFjY291bnRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBfcmVnaXN0ZXJPbkNsb3NlKCkge1xyXG4gICAgJCgnI3Nob3ctbW9kYWwnKS5tb2RhbCh7XHJcbiAgICAgICAgZGlzbWlzc2libGU6IHRydWUsXHJcbiAgICAgICAgb25DbG9zZVN0YXJ0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJCgnI2VkaXQtYnRuJykucmVtb3ZlQ2xhc3MoJ3NjYWxlLW91dCcpO1xyXG4gICAgICAgICAgICAkKCcjc3VibWl0LXJvdycpLnJlbW92ZUNsYXNzKCdzY2FsZS1pbicpO1xyXG4gICAgICAgICAgICAkKCcjdXBkYXRlLWZvcm0gaW5wdXQnKS5hdHRyKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59IiwiXHJcbmNvbnN0IGZpZWxkc01hcHBpbmcgPSB7XHJcbiAgICAnc2hvdy1pZCc6ICdfaWQnLFxyXG4gICAgJ3Nob3ctbmFtZSc6ICduYW1lJyxcclxuICAgICdzaG93LWVtYWlsJzogJ2VtYWlsJyxcclxuICAgICdzaG93LXBhc3N3b3JkJzogJ3Bhc3N3b3JkJyxcclxuICAgICdzaG93LXN0YXR1cyc6ICdzdGF0dXMnLFxyXG4gICAgJ3Nob3ctcGluJzogJ3BpbicsXHJcbiAgICAnc2hvdy1jcmVhdGVkJzoge1xyXG4gICAgICAgIHByb3A6ICdjcmVhdGVkJyxcclxuICAgICAgICBwYXJzZTogZm9ybWF0RGF0ZVxyXG4gICAgfSxcclxuICAgICdzaG93LW1lbWInOiB7XHJcbiAgICAgICAgcHJvcDogJ21lbWInLFxyXG4gICAgICAgIHBhcnNlOiBmb3JtYXREYXRlXHJcbiAgICB9LFxyXG4gICAgJ3Nob3ctc3RhdHVzLWNoYW5nZSc6IHtcclxuICAgICAgICBwcm9wOiAnbGFzdFN0YXR1c0NoYW5nZScsXHJcbiAgICAgICAgcGFyc2U6IGZvcm1hdERhdGVUaW1lXHJcbiAgICB9LFxyXG4gICAgJ3Nob3ctYnJlYWsnOiB7XHJcbiAgICAgICAgcHJvcDogJ2JyZWFrVW50aWwnLFxyXG4gICAgICAgIHBhcnNlOiBmb3JtYXREYXRlVGltZVxyXG4gICAgfVxyXG59O1xyXG5cclxuZnVuY3Rpb24gdXBkYXRlU2hvd01vZGFsKCkge1xyXG4gICAgbGV0IGFjY05hbWUgPSAkKCcuc2VsLWl0ZW0nKS5odG1sKCk7XHJcbiAgICAkLmdldCgnL2FjY291bnQvcmVhZCcsIHtuYW1lOiBhY2NOYW1lfSwgcG9wdWxhdGVTaG93TW9kYWwpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwb3B1bGF0ZVNob3dNb2RhbChhY2MpIHtcclxuICAgIGZvcihjb25zdCBba2V5ICwgdmFsXSBvZiBPYmplY3QuZW50cmllcyhmaWVsZHNNYXBwaW5nKSkge1xyXG4gICAgICAgIGxldCBuZXdWYWw7XHJcbiAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIE9iamVjdCAmJiBhY2NbdmFsWydwcm9wJ11dICYmIHZhbC5wYXJzZSAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICBuZXdWYWwgPSB2YWwucGFyc2UoYWNjW3ZhbFsncHJvcCddXSk7XHJcbiAgICAgICAgJChgIyR7a2V5fWApLnZhbChuZXdWYWwgfHwgYWNjW3ZhbF0gfHwgYWNjW3ZhbFsncHJvcCddXSB8fCAnJyk7XHJcbiAgICB9XHJcbiAgICBNLnVwZGF0ZVRleHRGaWVsZHMoKTtcclxuICAgICQoJyNzaG93LXN0b2NrZWQnKS5hdHRyKCdjaGVja2VkJywgYWNjWydzdG9ja2VkJ10pO1xyXG59XHJcbiJdfQ==
